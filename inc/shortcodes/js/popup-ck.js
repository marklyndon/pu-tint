jQuery(document).ready(function(e){var t={loadVals:function(){var n=e("#old-shortcode").text(),r=n;e(".popup-input").each(function(){var t=e(this),n=t.attr("id"),n=n.replace("shortcode_",""),i=new RegExp("{{"+n+"}}","g");r=r.replace(i,t.val())});e("#new-shortcode").remove();e("#popup-table").prepend('<div id="new-shortcode" class="hidden">'+r+"</div>");t.updatePreview()},updatePreview:function(){if(e("#sk-preview").size()>0){var t=e("#new-shortcode").html(),n=e("#sk-preview"),r=n.attr("src"),r=r.split("preview.php"),r=r[0]+"preview.php";n.attr("src",r+"?sc="+base64_encode(t));e("#sk-preview").height(e("#popup-window").outerHeight()-42)}},resizeTB:function(){var t=e("#TB_ajaxContent"),n=e("#TB_window"),r=e("#popup-window");t.css({padding:0,height:r.outerHeight()-15,overflow:"hidden"});n.css({width:t.outerWidth(),height:t.outerHeight()+30,marginLeft:-(t.outerWidth()/2),marginTop:-((t.outerHeight()+47)/2),top:"50%"})},load:function(){var t=this,n=e("#popup-window"),r=e("#popup-form",n),i=e("#old-shortcode",r).text(),s=e("#shortcode-popup",r).text(),o="";t.resizeTB();e(window).resize(function(){t.resizeTB()});t.loadVals();e(".popup-input",r).change(function(){t.loadVals()});e(".insert",r).click(function(){if(window.tinyMCE){window.tinyMCE.execInstanceCommand("content","mceInsertContent",!1,e("#new-shortcode",r).html());tb_remove()}})}};e("#popup-window").livequery(function(){t.load()})});