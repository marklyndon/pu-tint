/*
 * jQuery Nivo Slider v2.6
 * http://nivo.dev7studios.com
 *
 * Copyright 2011, Gilbert Pellegrom
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * March 2010
 */(function(e){var t=function(t,n){var r=e.extend({},e.fn.nivoSlider.defaults,n),i={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:!1,paused:!1,stop:!1},s=e(t);s.data("nivo:vars",i);s.css("position","relative");s.addClass("nivoSlider");var o=s.children();o.each(function(){var t=e(this),n="";if(!t.is("img")){if(t.is("a")){t.addClass("nivo-imageLink");n=t}t=t.find("img:first")}var r=t.width();r==0&&(r=t.attr("width"));var o=t.height();o==0&&(o=t.attr("height"));r>s.width()&&s.width(r);o>s.height()&&s.height(o);n!=""&&n.css("display","none");t.css("display","none");i.totalSlides++});if(r.startSlide>0){r.startSlide>=i.totalSlides&&(r.startSlide=i.totalSlides-1);i.currentSlide=r.startSlide}e(o[i.currentSlide]).is("img")?i.currentImage=e(o[i.currentSlide]):i.currentImage=e(o[i.currentSlide]).find("img:first");e(o[i.currentSlide]).is("a")&&e(o[i.currentSlide]).css("display","block");s.css("background",'url("'+i.currentImage.attr("src")+'") no-repeat');s.append(e('<div class="nivo-caption"><p></p></div>').css({display:"none",opacity:r.captionOpacity}));var u=function(t){var n=e(".nivo-caption",s);if(i.currentImage.attr("title")!=""&&i.currentImage.attr("title")!=undefined){var r=i.currentImage.attr("title");r.substr(0,1)=="#"&&(r=e(r).html());n.css("display")=="block"?n.find("p").fadeOut(t.animSpeed,function(){e(this).html(r);e(this).fadeIn(t.animSpeed)}):n.find("p").html(r);n.fadeIn(t.animSpeed)}else n.fadeOut(t.animSpeed)};u(r);var a=0;!r.manualAdvance&&o.length>1&&(a=setInterval(function(){d(s,o,r,!1)},r.pauseTime));if(r.directionNav){s.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+r.prevText+'</a><a class="nivo-nextNav">'+r.nextText+"</a></div>");if(r.directionNavHide){e(".nivo-directionNav",s).hide();s.hover(function(){e(".nivo-directionNav",s).show()},function(){e(".nivo-directionNav",s).hide()})}e("a.nivo-prevNav",s).live("click",function(){if(i.running)return!1;clearInterval(a);a="";i.currentSlide-=2;d(s,o,r,"prev")});e("a.nivo-nextNav",s).live("click",function(){if(i.running)return!1;clearInterval(a);a="";d(s,o,r,"next")})}if(r.controlNav){var f=e('<div class="nivo-controlNav"></div>');s.append(f);for(var l=0;l<o.length;l++)if(r.controlNavThumbs){var c=o.eq(l);c.is("img")||(c=c.find("img:first"));r.controlNavThumbsFromRel?f.append('<a class="nivo-control" rel="'+l+'"><img src="'+c.attr("rel")+'" alt="" /></a>'):f.append('<a class="nivo-control" rel="'+l+'"><img src="'+c.attr("src").replace(r.controlNavThumbsSearch,r.controlNavThumbsReplace)+'" alt="" /></a>')}else f.append('<a class="nivo-control" rel="'+l+'">'+(l+1)+"</a>");e(".nivo-controlNav a:eq("+i.currentSlide+")",s).addClass("active");e(".nivo-controlNav a",s).live("click",function(){if(i.running)return!1;if(e(this).hasClass("active"))return!1;clearInterval(a);a="";s.css("background",'url("'+i.currentImage.attr("src")+'") no-repeat');i.currentSlide=e(this).attr("rel")-1;d(s,o,r,"control")})}r.keyboardNav&&e(window).keypress(function(e){if(e.keyCode=="37"){if(i.running)return!1;clearInterval(a);a="";i.currentSlide-=2;d(s,o,r,"prev")}if(e.keyCode=="39"){if(i.running)return!1;clearInterval(a);a="";d(s,o,r,"next")}});r.pauseOnHover&&s.hover(function(){i.paused=!0;clearInterval(a);a=""},function(){i.paused=!1;a==""&&!r.manualAdvance&&(a=setInterval(function(){d(s,o,r,!1)},r.pauseTime))});s.bind("nivo:animFinished",function(){i.running=!1;e(o).each(function(){e(this).is("a")&&e(this).css("display","none")});e(o[i.currentSlide]).is("a")&&e(o[i.currentSlide]).css("display","block");a==""&&!i.paused&&!r.manualAdvance&&(a=setInterval(function(){d(s,o,r,!1)},r.pauseTime));r.afterChange.call(this)});var h=function(t,n,r){for(var i=0;i<n.slices;i++){var s=Math.round(t.width()/n.slices);i==n.slices-1?t.append(e('<div class="nivo-slice"></div>').css({left:s*i+"px",width:t.width()-s*i+"px",height:"0px",opacity:"0",background:'url("'+r.currentImage.attr("src")+'") no-repeat -'+(s+i*s-s)+"px 0%"})):t.append(e('<div class="nivo-slice"></div>').css({left:s*i+"px",width:s+"px",height:"0px",opacity:"0",background:'url("'+r.currentImage.attr("src")+'") no-repeat -'+(s+i*s-s)+"px 0%"}))}},p=function(t,n,r){var i=Math.round(t.width()/n.boxCols),s=Math.round(t.height()/n.boxRows);for(var o=0;o<n.boxRows;o++)for(var u=0;u<n.boxCols;u++)u==n.boxCols-1?t.append(e('<div class="nivo-box"></div>').css({opacity:0,left:i*u+"px",top:s*o+"px",width:t.width()-i*u+"px",height:s+"px",background:'url("'+r.currentImage.attr("src")+'") no-repeat -'+(i+u*i-i)+"px -"+(s+o*s-s)+"px"})):t.append(e('<div class="nivo-box"></div>').css({opacity:0,left:i*u+"px",top:s*o+"px",width:i+"px",height:s+"px",background:'url("'+r.currentImage.attr("src")+'") no-repeat -'+(i+u*i-i)+"px -"+(s+o*s-s)+"px"}))},d=function(t,n,r,i){var s=t.data("nivo:vars");s&&s.currentSlide==s.totalSlides-1&&r.lastSlide.call(this);if((!s||s.stop)&&!i)return!1;r.beforeChange.call(this);if(!i)t.css("background",'url("'+s.currentImage.attr("src")+'") no-repeat');else{i=="prev"&&t.css("background",'url("'+s.currentImage.attr("src")+'") no-repeat');i=="next"&&t.css("background",'url("'+s.currentImage.attr("src")+'") no-repeat')}s.currentSlide++;if(s.currentSlide==s.totalSlides){s.currentSlide=0;r.slideshowEnd.call(this)}s.currentSlide<0&&(s.currentSlide=s.totalSlides-1);e(n[s.currentSlide]).is("img")?s.currentImage=e(n[s.currentSlide]):s.currentImage=e(n[s.currentSlide]).find("img:first");if(r.controlNav){e(".nivo-controlNav a",t).removeClass("active");e(".nivo-controlNav a:eq("+s.currentSlide+")",t).addClass("active")}u(r);e(".nivo-slice",t).remove();e(".nivo-box",t).remove();if(r.effect=="random"){var o=new Array("sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse");s.randAnim=o[Math.floor(Math.random()*(o.length+1))];s.randAnim==undefined&&(s.randAnim="fade")}if(r.effect.indexOf(",")!=-1){var o=r.effect.split(",");s.randAnim=o[Math.floor(Math.random()*o.length)];s.randAnim==undefined&&(s.randAnim="fade")}s.running=!0;if(r.effect=="sliceDown"||r.effect=="sliceDownRight"||s.randAnim=="sliceDownRight"||r.effect=="sliceDownLeft"||s.randAnim=="sliceDownLeft"){h(t,r,s);var a=0,f=0,l=e(".nivo-slice",t);if(r.effect=="sliceDownLeft"||s.randAnim=="sliceDownLeft")l=e(".nivo-slice",t)._reverse();l.each(function(){var n=e(this);n.css({top:"0px"});f==r.slices-1?setTimeout(function(){n.animate({height:"100%",opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+a):setTimeout(function(){n.animate({height:"100%",opacity:"1.0"},r.animSpeed)},100+a);a+=50;f++})}else if(r.effect=="sliceUp"||r.effect=="sliceUpRight"||s.randAnim=="sliceUpRight"||r.effect=="sliceUpLeft"||s.randAnim=="sliceUpLeft"){h(t,r,s);var a=0,f=0,l=e(".nivo-slice",t);if(r.effect=="sliceUpLeft"||s.randAnim=="sliceUpLeft")l=e(".nivo-slice",t)._reverse();l.each(function(){var n=e(this);n.css({bottom:"0px"});f==r.slices-1?setTimeout(function(){n.animate({height:"100%",opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+a):setTimeout(function(){n.animate({height:"100%",opacity:"1.0"},r.animSpeed)},100+a);a+=50;f++})}else if(r.effect=="sliceUpDown"||r.effect=="sliceUpDownRight"||s.randAnim=="sliceUpDown"||r.effect=="sliceUpDownLeft"||s.randAnim=="sliceUpDownLeft"){h(t,r,s);var a=0,f=0,c=0,l=e(".nivo-slice",t);if(r.effect=="sliceUpDownLeft"||s.randAnim=="sliceUpDownLeft")l=e(".nivo-slice",t)._reverse();l.each(function(){var n=e(this);if(f==0){n.css("top","0px");f++}else{n.css("bottom","0px");f=0}c==r.slices-1?setTimeout(function(){n.animate({height:"100%",opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+a):setTimeout(function(){n.animate({height:"100%",opacity:"1.0"},r.animSpeed)},100+a);a+=50;c++})}else if(r.effect=="fold"||s.randAnim=="fold"){h(t,r,s);var a=0,f=0;e(".nivo-slice",t).each(function(){var n=e(this),i=n.width();n.css({top:"0px",height:"100%",width:"0px"});f==r.slices-1?setTimeout(function(){n.animate({width:i,opacity:"1.0"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+a):setTimeout(function(){n.animate({width:i,opacity:"1.0"},r.animSpeed)},100+a);a+=50;f++})}else if(r.effect=="fade"||s.randAnim=="fade"){h(t,r,s);var d=e(".nivo-slice:first",t);d.css({height:"100%",width:t.width()+"px"});d.animate({opacity:"1.0"},r.animSpeed*2,"",function(){t.trigger("nivo:animFinished")})}else if(r.effect=="slideInRight"||s.randAnim=="slideInRight"){h(t,r,s);var d=e(".nivo-slice:first",t);d.css({height:"100%",width:"0px",opacity:"1"});d.animate({width:t.width()+"px"},r.animSpeed*2,"",function(){t.trigger("nivo:animFinished")})}else if(r.effect=="slideInLeft"||s.randAnim=="slideInLeft"){h(t,r,s);var d=e(".nivo-slice:first",t);d.css({height:"100%",width:"0px",opacity:"1",left:"",right:"0px"});d.animate({width:t.width()+"px"},r.animSpeed*2,"",function(){d.css({left:"0px",right:""});t.trigger("nivo:animFinished")})}else if(r.effect=="boxRandom"||s.randAnim=="boxRandom"){p(t,r,s);var m=r.boxCols*r.boxRows,f=0,a=0,g=v(e(".nivo-box",t));g.each(function(){var n=e(this);f==m-1?setTimeout(function(){n.animate({opacity:"1"},r.animSpeed,"",function(){t.trigger("nivo:animFinished")})},100+a):setTimeout(function(){n.animate({opacity:"1"},r.animSpeed)},100+a);a+=20;f++})}else if(r.effect=="boxRain"||s.randAnim=="boxRain"||r.effect=="boxRainReverse"||s.randAnim=="boxRainReverse"||r.effect=="boxRainGrow"||s.randAnim=="boxRainGrow"||r.effect=="boxRainGrowReverse"||s.randAnim=="boxRainGrowReverse"){p(t,r,s);var m=r.boxCols*r.boxRows,f=0,a=0,y=0,b=0,w=new Array;w[y]=new Array;var g=e(".nivo-box",t);if(r.effect=="boxRainReverse"||s.randAnim=="boxRainReverse"||r.effect=="boxRainGrowReverse"||s.randAnim=="boxRainGrowReverse")g=e(".nivo-box",t)._reverse();g.each(function(){w[y][b]=e(this);b++;if(b==r.boxCols){y++;b=0;w[y]=new Array}});for(var E=0;E<r.boxCols*2;E++){var S=E;for(var x=0;x<r.boxRows;x++){if(S>=0&&S<r.boxCols){(function(n,i,o,u,a){var f=e(w[n][i]),l=f.width(),c=f.height();(r.effect=="boxRainGrow"||s.randAnim=="boxRainGrow"||r.effect=="boxRainGrowReverse"||s.randAnim=="boxRainGrowReverse")&&f.width(0).height(0);u==a-1?setTimeout(function(){f.animate({opacity:"1",width:l,height:c},r.animSpeed/1.3,"",function(){t.trigger("nivo:animFinished")})},100+o):setTimeout(function(){f.animate({opacity:"1",width:l,height:c},r.animSpeed/1.3)},100+o)})(x,S,a,f,m);f++}S--}a+=100}}},v=function(e){for(var t,n,r=e.length;r;t=parseInt(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e},m=function(e){this.console&&typeof console.log!="undefined"&&console.log(e)};this.stop=function(){if(!e(t).data("nivo:vars").stop){e(t).data("nivo:vars").stop=!0;m("Stop Slider")}};this.start=function(){if(e(t).data("nivo:vars").stop){e(t).data("nivo:vars").stop=!1;m("Start Slider")}};r.afterLoad.call(this);return this};e.fn.nivoSlider=function(n){return this.each(function(r,i){var s=e(this);if(s.data("nivoslider"))return s.data("nivoslider");var o=new t(this,n);s.data("nivoslider",o)})};e.fn.nivoSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3e3,startSlide:0,directionNav:!0,directionNavHide:!0,controlNav:!0,controlNavThumbs:!1,controlNavThumbsFromRel:!1,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",keyboardNav:!0,pauseOnHover:!0,manualAdvance:!1,captionOpacity:.8,prevText:"",nextText:"",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};e.fn._reverse=[].reverse})(jQuery);